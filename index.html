<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>Ù†Ù…ÙˆØ°Ø¬ ØªØ®Ø²ÙŠÙ† Ø¨ÙŠØ§Ù†Ø§Øª</title>
  <style>
    body {
      font-family: Arial;
      background-color: #f0f0f0;
      text-align: center;
      padding: 50px;
    }
    input, button {
      font-size: 18px;
      padding: 10px;
      margin: 10px;
    }
  </style>
</head>
<body>
  <h2>ğŸ“© Ø£Ø¯Ø®Ù„ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ</h2>
  <input type="text" id="inputData" placeholder="Ù†Øµ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª..." />
  <br>
  <button onclick="addData()">ğŸ“¤ Ø£Ø±Ø³Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>

  <script>
    const owner = 'gity678';
    const repo = 'static';
    const path = 'data.json';
    const branch = 'main';
    const token = 'hp_IjpVsLqgSpiUFfoDviYWpYeONINI573Oo1yF'; // Ù…Ø¤Ù‚Øª

    async function addData() {
      const input = document.getElementById('inputData').value.trim();
      if (!input) return alert('ğŸ“ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ù†Øµ Ø£ÙˆÙ„Ø§Ù‹.');

      try {
        const apiUrl = `https://api.github.com/repos/${owner}/${repo}/contents/${path}?ref=${branch}`;

        const res = await fetch(apiUrl, {
          headers: { Authorization: `token ${token}` }
        });

        if (!res.ok) throw new Error('ğŸ“‚ ÙØ´Ù„ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ù…Ù„Ù.');

        const file = await res.json();
        const content = atob(file.content.replace(/\n/g, ''));
        const json = JSON.parse(content);

        json.push({ text: input, date: new Date().toISOString() });

        const updatedContent = btoa(JSON.stringify(json, null, 2));

        const updateRes = await fetch(apiUrl, {
          method: 'PUT',
          headers: {
            Authorization: `token ${token}`,
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({
            message: `ğŸ†• Ø¥Ø¶Ø§ÙØ©: ${input}`,
            content: updatedContent,
            sha: file.sha,
            branch
          })
        });

        if (!updateRes.ok) throw new Error('âŒ ÙØ´Ù„ ÙÙŠ Ø±ÙØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.');

        alert('âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª!');
        document.getElementById('inputData').value = '';
      } catch (e) {
        alert('Ø®Ø·Ø£: ' + e.message);
      }
    }
  </script>
</body>
</html>

